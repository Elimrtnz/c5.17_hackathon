<!DOCTYPE html>
<html lang="en">
<head>

    <script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
    <meta charset="UTF-8">
    <title></title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
<div id="gameBoard"></div>
</body>
<script>
    var turn = 'player1';
    var array = [];
    var classId = '';
    var toggleTurn = 0;
    var squaresLeft = 60;


    function createGame(){
        var temp_array = [];
        for (var i =0; i <= 7; i++){
            for(var j = 0; j <= 7; j++){
                classId = '' + i + j;
                var newSquare = $('<div>').appendTo('#gameBoard');
                $(newSquare).addClass('square');
                $(newSquare).attr('id', classId);
                temp_array.push(newSquare);
            }
            array.push(temp_array);
            temp_array = [];
        }
    }
    function startConditions(){
        $('#33').addClass('player1');
        $('#33').removeClass('square');
        $('#34').addClass('player2');
        $('#34').removeClass('square');
        $('#44').addClass('player1');
        $('#44').removeClass('square');
        $('#43').addClass('player2');
        $('#43').removeClass('square');
    }
    function makeMove(){
        toggleTurn = 0;
        var tempI = $(this).attr('id').charAt(0);
        var tempJ = $(this).attr('id').charAt(1);
        var firstLoop = 0;
        if(turn === 'player1')
            for(var i = -1; i < 2; i++) {
                for (var j = -1; j < 2; j++) {
                    var temp1 = parseInt($(this).attr('id').charAt(0));
                    var temp2 = parseInt($(this).attr('id').charAt(1));
                    var tempId = '#' + (temp1 + i) + (temp2 + j);
                    if (turn === 'player1' ) {
                        if ($(tempId).attr('class') === 'player2') {
                            $(tempId).addClass('marked');
                            temp1 = temp1 + i + i;
                            temp2 = temp2 + j + j;
                            var tempId2 = '#' + temp1 + temp2;
                            if ($(tempId2).attr('class') === 'player1') {
                                $(this).removeClass('square');
                                $(this).addClass('player1');
                                $(tempId).removeClass('square');
                                $(tempId).removeClass('player2');
                                $(tempId).addClass('player1');
                                $('.marked').removeClass('marked');
                                if(i===1 & j === 1) {
                                    turn = 'player2';
                                    firstLoop += 1;
                                }
                            }
                            else if ($(tempId2).attr('class') === 'player2') {
                                $(tempId2).addClass('marked');
                                for (var k = 0; k < array.length; k++) {
                                    $(tempId2).addClass('marked');
                                    temp1 = temp1 + i;
                                    temp2 = temp2 + j;
                                    tempId2 = '#' + temp1 + temp2;
                                    if ($(tempId2).attr('class') === 'player2') {
                                        $(tempId2).addClass('marked');
                                    }
                                    else if ($(tempId2).attr('class') === 'player1') {
                                        $('.marked').removeClass('square');
                                        $('.marked').removeClass('player2');
                                        $('.marked').addClass('player1');
                                        $('.marked').removeClass('marked');
                                        $(tempId2).removeClass('square');
                                        $(tempId2).removeClass('player2');
                                        $(tempId2).addClass('player1');
                                        $(this).removeClass('square');
                                        $(this).addClass('player1');
                                        if(i===1 & j === 1) {
                                            turn = 'player2';
                                            firstLoop +=1;
                                        }
                                    }
                                }
                            }
                        }
                        else if(i === 1 && j === 1) {
                            turn = 'player2';
                            firstLoop += 1;
                        }
                        $('.marked').removeClass('marked');
                    }
                }
        }
        else if(turn === 'player2' && firstLoop === 0) {
            for (var i = -1; i < 2; i++) {
                for (var j = -1; j < 2; j++) {
                    var temp1 = parseInt($(this).attr('id').charAt(0));
                    var temp2 = parseInt($(this).attr('id').charAt(1));
                    var tempId = '#' + (temp1 + i) + (temp2 + j);
                    if (turn === 'player2') {
                        if ($(tempId).attr('class') === 'player1') {
                            $(tempId).addClass('marked');
                            temp1 = temp1 + i + i;
                            temp2 = temp2 + j + j;
                            tempId2 = '#' + temp1 + temp2;
                            if ($(tempId2).attr('class') === 'player2') {
                                $(this).removeClass('square');
                                $(this).addClass('player2');
                                $(tempId).removeClass('square');
                                $(tempId).removeClass('player1');
                                $(tempId).addClass('player2');
                                $('.marked').removeClass('marked');
                                if(i===1 & j === 1) {
                                    turn = 'player1';
                                }
                            }
                            else if ($(tempId2).attr('class') === 'player1') {
                                $(tempId2).addClass('marked');
                                for (var l = 0; l < array.length; l++) {
                                    temp1 = temp1 + i;
                                    temp2 = temp2 + j;
                                    tempId2 = '#' + temp1 + temp2;
                                    if ($(tempId2).attr('class') === 'player1') {
                                        $(tempId2).addClass('marked');
                                    }
                                    else if ($(tempId2).attr('class') === 'player2') {
                                        $('.marked').removeClass('square');
                                        $('.marked').removeClass('player1');
                                        $('.marked').addClass('player2');
                                        $('.marked').removeClass('marked');
                                        $(tempId2).removeClass('square');
                                        $(tempId2).removeClass('player1');
                                        $(tempId2).addClass('player2');
                                        $(this).removeClass('square');
                                        $(this).addClass('player2');
                                        if(i===1 & j === 1) {
                                            turn = 'player1';
                                        }
                                    }
                                }
                            }
                        }
                        else if(i === 1 && j === 1){
                            turn = 'player1'
                        }
                        $('.marked').removeClass('marked');
                    }
                }

            }
        }


    }

    $(document).ready(function(){
        createGame();
        startConditions();
        //isClickable();
        $('.square').on('click', makeMove);
    });
</script>
</html>
